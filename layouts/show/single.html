{{ partial "head.html" . }}
{{ partial "nav.html" . }}

{{/* show starts on the first date in the showtimes array */}}
{{ $start := (index .Params.showtimes 0) }}
{{/* show ends on the last date in the showtimes array */}}
{{ $end := (index .Params.showtimes (sub (len .Params.showtimes) 1) ) }}

<h2>
  {{ .Title }}

  {{/* only show the subtitle if it exists */}}
  {{if .Params.subtitle}}
    <small>{{ .Params.subtitle }}</small>
  {{end}}

  {{if .Params.playwrights}}
    by {{ .Params.playwrights }}
  {{end}}
</h2>

Director: {{ .Params.directors }}

<!-- Responsive youtube embed -->
<style>
.video-container {
    position: relative;
    padding-bottom: 56.25%;
    padding-top: 30px; height: 0; overflow: hidden;
}

.video-container iframe,
.video-container object,
.video-container embed {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}
</style>
{{if .Params.youtube_id}}
  <div class="video-container">
    <iframe width="560" height="315"
      src="https://www.youtube.com/embed/{{ .Params.Dates.youtube_id }}"
      frameborder="0" allowfullscreen></iframe>
  </div>
{{end}}

<img src="poster.jpg" />

{{ .Content }}

<h3>Showtimes</h3>

<ul>
  {{ range .Params.showtimes }}
    <li>{{ dateFormat "Mon, Jan 2, 2006 at 3:04PM" . }}</li>
  {{ end }}
</ul>

Run starts on
  {{ dateFormat "Mon, Jan 2, 2006" $start }}
and ends on
  {{ dateFormat "Mon, Jan 2, 2006" $end }}

<div>
  {{ if .Prev }}
    Previous: <a class="previous" href="{{.Prev.Permalink}}"> {{.Prev.Title}}</a> <br/>
  {{ end }}
  {{ if .Next }}
    Next: <a class="next" href="{{.Next.Permalink}}"> {{.Next.Title}}</a>
  {{ end }}
</div>

{{ partial "foot.html" . }}
